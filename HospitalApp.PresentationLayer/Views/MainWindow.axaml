<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:HospitalApp.PresentationLayer.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="HospitalApp.PresentationLayer.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="HospitalApp">

    <Design.DataContext>
        <vm:MainWindowViewModel />
    </Design.DataContext>
    <StackPanel Margin="20" Orientation="Horizontal">
        <StackPanel Width="400">
            <TextBlock Text="Имя:" />
            <TextBox Name="FirstNameTextBox" Margin="0,0,0,10" MinWidth="200" />

            <TextBlock Text="Фамилия:" />
            <TextBox Name="LastNameTextBox" Margin="0,0,0,10" MinWidth="200" />

            <TextBlock Text="Дата рождения:" />
            <DatePicker Name="BirthDatePicker" Margin="0,0,0,10" MinWidth="200" />

            <TextBlock Text="Диагноз:" />
            <TextBox Name="DiagnosisTextBox" Margin="0,0,0,10" MinWidth="200" />

            <TextBlock Text="Отделение:" />
            <ComboBox Name="DepartmentBox"
                      Width="200"
                      Height="30"
                      SelectedItem="{Binding SelectedDepartment}"
                      ItemsSource="{Binding Departments}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding DepartmentName}" />
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <Button Content="Госпитализировать" Name="SaveButton" Click="HospitalizePatient" />
            <TextBlock Text="Список госпитализированных пациентов:" Margin="0,20,0, 20" />
            <ScrollViewer Width="400" Height="300" HorizontalAlignment="Left" VerticalAlignment="Top">
                <ListBox Name="PatientsListBox"
                         ItemsSource="{Binding Patients}"
                         SelectedItem="{Binding SelectedPatient, Mode=TwoWay}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="{Binding Name}" />
                                <TextBlock Text="{Binding LastName}" />
                                <TextBlock Text="{Binding BirthDate}" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </StackPanel>

        <Border BorderBrush="Gray" BorderThickness="1" Margin="10, 0, 0, 10" Padding="10" CornerRadius="5" Height="760">
            <StackPanel>
                <TextBlock Text="Электронная медицинская карта пациента:" FontWeight="Bold" FontSize="14"
                           Margin="0,0,0,5" />

                <TextBlock Text="Имя: " FontWeight="Medium" />
                <TextBlock Text="{Binding SelectedPatient.Name}" Margin="0,0,0,5" />

                <TextBlock Text="Фамилия: " FontWeight="Medium" />
                <TextBlock Text="{Binding SelectedPatient.LastName}" Margin="0,0,0,5" />

                <TextBlock Text="Дата рождения: " FontWeight="Medium" />
                <TextBlock Text="{Binding SelectedPatient.BirthDate, StringFormat=d}" Margin="0,0,0,5" />

                <TextBlock Text="Диагноз: " FontWeight="Medium" />
                <TextBlock Text="{Binding SelectedMedicalRecord.Diagnosis}" Margin="0,0,0,5" />

                <TextBlock Text="Отделение: " FontWeight="Medium" />
                <TextBlock Text="{Binding SelectedMedicalRecord.Department, StringFormat=d}" Margin="0,0,0,5" />

                <TextBlock Text="Принимающий врач: " FontWeight="Medium" />
                <TextBlock Text="{Binding DutyDoctor.DoctorName, StringFormat=d}" Margin="0,0,0,5" />

                <TextBlock Text="Лечащий врач: " FontWeight="Medium" />
                <TextBlock Text="{Binding PatientDoctor.DoctorName, StringFormat=d}" Margin="0,0,0,5" />

                <TextBlock Text="Дата создания записи: " FontWeight="Medium" />
                <TextBlock Text="{Binding SelectedMedicalRecord.DateOfCreate, StringFormat=d}" Margin="0,0,0,5" />
                <TextBlock Text="Список назначений пациента:" Margin="0,0,0, 5" />
                <ScrollViewer Width="400" Height="350" HorizontalAlignment="Left" VerticalAlignment="Top">
                    <ListBox Name="AppointmentListBox"
                             ItemsSource="{Binding Appointments}"
                             SelectedItem="{Binding SelectedAppointment, Mode=TwoWay}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock Text="{Binding AppointmentType}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </ScrollViewer>
                <StackPanel Orientation="Horizontal">
                    <Button Content="Выполнить" Name="ExecuteAppointmentButton" Click="ExecuteAppointment"
                            Margin="0,5,0, 0" />
                    <Button Content="Выписать" Name="WriteOutButton" Click="WriteOutPatient" Margin="220,5,0, 0" />
                </StackPanel>
            </StackPanel>
        </Border>
        <Grid HorizontalAlignment="Left" VerticalAlignment="Top"> 
        <Border BorderBrush="Gray" BorderThickness="1"  Margin="10, 10, 0, 10" Padding="10" CornerRadius="5" Width="500" Height="350">
            <StackPanel>
                <TextBlock Text="Добавить назначение:" FontWeight="Bold" FontSize="14" Margin="0,0,0,10" />

                <ComboBox Name="AppointmentTypeComboBox"
                          SelectedItem="{Binding SelectedAppointmentType}"
                          ItemsSource="{Binding AppointmentTypes}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <StackPanel Name="MedicationTypeStackPanel" IsVisible="{Binding IsMedicationTypeSelected}">
                    <TextBlock Text="Тип медикаментозного назначения:" />
                    <ComboBox Name="MedicationTypeComboBox"
                              SelectedItem="{Binding SelectedMedicationType}"
                              ItemsSource="{Binding MedicationTypes}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <StackPanel Name="InjectionFields" IsVisible="{Binding IsInjectionTypeSelected}">
                        <TextBlock Text="Количество инъекций:" />
                        <TextBox Name="InjectionCountTextBox" />
                    </StackPanel>

                    <StackPanel Name="TabletFields" IsVisible="{Binding IsTabletTypeSelected}">
                        <TextBlock Text="Дозировка:" />
                        <TextBox Name="DosageTextBox" />
                        <TextBlock Text="Количество дней:" />
                        <TextBox Name="DaysCountTextBox" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Name="DiagnosticAndPreventiveStackPanel"
                            IsVisible="{Binding IsDiagnosticOrPreventiveTypeSelected}">
                    <TextBlock Text="Введите дополнительные данные:" />
                    <TextBox Name="AdditionalInfoTextBox" />
                </StackPanel>

                <Button Content="Добавить назначение" Name="AddAppointmentButton" Click="AddAppointment" />
            </StackPanel>
        </Border>
            </Grid>
    </StackPanel>

</Window>